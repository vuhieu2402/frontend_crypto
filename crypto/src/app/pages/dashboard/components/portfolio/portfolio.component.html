<p-card styleClass="mb-1 portfolio-card">
  <ng-template pTemplate="header">
    <div class="flex justify-between items-center px-4 pt-4">
      <h2 class="text-xl font-bold">Your Portfolio</h2>
      <div class="flex gap-2">
        <p-button 
          icon="pi pi-refresh" 
          (click)="refreshData()" 
          styleClass="p-button-rounded p-button-text"
          [loading]="loading"
          pTooltip="Refresh data"
        ></p-button>
        <p-button icon="pi pi-ellipsis-v" styleClass="p-button-rounded p-button-text"></p-button>
      </div>
    </div>
  </ng-template>

  <div class="portfolio-content">
    <div class="flex flex-col md:flex-row justify-between gap-4 items-center">
      <div class="flex flex-col gap-1">
        <div class="text-sm text-muted-foreground">Total Value</div>
        <div class="text-2xl font-bold">{{ totalValue | currency }}</div>
        <div class="flex items-center text-sm" [ngClass]="{'text-green-500': percentChange > 0, 'text-red-500': percentChange < 0}">
          <i class="pi mr-1" [ngClass]="{'pi-arrow-up': percentChange > 0, 'pi-arrow-down': percentChange < 0}"></i>
          <span>{{ changeValue | currency }} ({{ percentChange }}%)</span>
        </div>
      </div>

      <!-- Pie chart for portfolio allocation -->
      <div class="w-40 h-40">
        <p-chart type="doughnut" [data]="chartData" [options]="chartOptions"></p-chart>
      </div>
    </div>

    <div class="mt-4">
      <h3 class="text-md font-semibold mb-2">Assets</h3>
      <div class="space-y-3 assets-list">
        <div *ngFor="let asset of portfolioAssets" class="flex justify-between items-center p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors">
          <div class="flex items-center gap-2">
            <div class="w-2 h-8" [style.background-color]="asset.color"></div>
            <div>
              <div class="font-medium">{{ asset.name }}</div>
              <div class="text-xs text-muted-foreground">{{ asset.symbol }}</div>
            </div>
          </div>
          <div class="text-right">
            <div>{{ asset.value }}</div>
            <div class="text-xs text-muted-foreground">{{ asset.allocation }}%</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <ng-template pTemplate="footer">
    <div class="flex justify-between">
      <p-button label="Deposit" icon="pi pi-arrow-down" styleClass="p-button-sm"></p-button>
      <p-button label="Withdraw" icon="pi pi-arrow-up" styleClass="p-button-outlined p-button-sm"></p-button>
      <p-button label="Trade" icon="pi pi-sync" styleClass="p-button-sm"></p-button>
    </div>
  </ng-template>
</p-card> 